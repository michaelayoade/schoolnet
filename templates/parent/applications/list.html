{% extends "parent/base.html" %}
{% block title %}My Applications - Parent Portal{% endblock %}
{% block parent_content %}
<h1 class="text-2xl font-bold text-slate-900 dark:text-white font-display mb-6">My Applications</h1>

{% if applications %}
<div class="space-y-4">
    {% for item in applications %}
    {% set app = item.app %}
    <a href="/parent/applications/{{ app.id }}" class="block bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-5 card-hover">
        <div class="flex items-start justify-between">
            <div>
                <h3 class="font-semibold text-slate-900 dark:text-white">{{ item.school_name }}</h3>
                <p class="text-sm text-slate-500 dark:text-slate-400 mt-0.5">{{ item.form_title }}</p>
                <p class="text-xs text-slate-400 dark:text-slate-500 mt-1">{{ app.application_number }}</p>
                {% if app.ward_first_name %}
                <p class="text-sm text-slate-600 dark:text-slate-300 mt-2">Ward: {{ app.ward_first_name }} {{ app.ward_last_name }}</p>
                {% endif %}
            </div>
            <div class="text-right">
                {% set status_colors = {'draft': 'bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300', 'submitted': 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400', 'under_review': 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400', 'accepted': 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400', 'rejected': 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400', 'withdrawn': 'bg-slate-100 text-slate-500 dark:bg-slate-700 dark:text-slate-400'} %}
                <span class="inline-flex px-2.5 py-0.5 rounded-full text-xs font-medium {{ status_colors.get(app.status.value, 'bg-slate-100 text-slate-700') }}">
                    {{ app.status.value | replace('_', ' ') | title }}
                </span>
                <p class="text-xs text-slate-400 mt-1">{{ app.created_at.strftime('%d %b %Y') }}</p>
            </div>
        </div>
    </a>
    {% endfor %}
</div>
{% else %}
<div class="text-center py-12 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700">
    <p class="text-slate-500 dark:text-slate-400">No applications yet.</p>
    <a href="/schools" class="mt-4 inline-block text-primary-600 dark:text-primary-400 font-medium hover:underline">Find a school to apply</a>
</div>
{% endif %}
{% endblock %}
