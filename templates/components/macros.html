{# Shared UI macros for starter screens #}

{% macro status_badge(status) %}
{% set v = (status or "")|upper %}
{% set cls = {
  "ACTIVE": "bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300",
  "INACTIVE": "bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300",
  "ARCHIVED": "bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-300"
}.get(v, "bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300") %}
<span class="inline-flex items-center rounded-full px-2 py-0.5 text-xs font-semibold {{ cls }}">
  {{ (status or "unknown")|replace("_", " ")|title }}
</span>
{% endmacro %}

{% macro sortable_th(label, column, current_sort="", current_dir="desc", base_url="/", extra_params={}) %}
{% set is_active = current_sort == column %}
{% set next_dir = "asc" if (is_active and current_dir == "desc") else "desc" %}
{% set icon = "↕" %}
{% if is_active and current_dir == "asc" %}
  {% set icon = "↑" %}
{% elif is_active and current_dir == "desc" %}
  {% set icon = "↓" %}
{% endif %}
{% set params = extra_params.copy() %}
{% set _ = params.update({"sort": column, "dir": next_dir}) %}
{% set query = params|urlencode %}
<th class="px-4 py-2 text-left text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400">
  <a href="{{ base_url }}{% if query %}?{{ query }}{% endif %}" class="inline-flex items-center gap-1 hover:text-primary-600 dark:hover:text-primary-300">
    <span>{{ label }}</span>
    <span class="text-[10px]">{{ icon }}</span>
  </a>
</th>
{% endmacro %}

{% macro pagination(page=1, total_pages=1, base_url="/", params={}) %}
{% if total_pages > 1 %}
<nav class="mt-4 flex items-center justify-between text-sm">
  <span class="text-slate-500 dark:text-slate-400">Page {{ page }} of {{ total_pages }}</span>
  <div class="flex items-center gap-2">
    {% if page > 1 %}
      {% set p = params.copy() %}
      {% set _ = p.update({"page": page - 1}) %}
      <a href="{{ base_url }}?{{ p|urlencode }}" class="rounded-md border border-slate-200 px-3 py-1.5 hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800">Prev</a>
    {% endif %}
    {% if page < total_pages %}
      {% set p = params.copy() %}
      {% set _ = p.update({"page": page + 1}) %}
      <a href="{{ base_url }}?{{ p|urlencode }}" class="rounded-md border border-slate-200 px-3 py-1.5 hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800">Next</a>
    {% endif %}
  </div>
</nav>
{% endif %}
{% endmacro %}
