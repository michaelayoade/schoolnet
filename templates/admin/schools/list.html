{% extends "admin/base.html" %}
{% block title %}Schools Management - Admin{% endblock %}
{% block admin_content %}
<div class="flex items-center justify-between mb-6">
    <h1 class="text-2xl font-bold text-slate-900 dark:text-white font-display">Schools</h1>
</div>

<!-- Filters -->
<div class="mb-6 flex gap-2">
    <a href="/admin/schools" class="px-3 py-1.5 rounded-lg text-sm font-medium {{ 'bg-primary-100 text-primary-700 dark:bg-primary-900/30 dark:text-primary-400' if not status_filter else 'text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700/50' }}">All</a>
    <a href="/admin/schools?status=pending" class="px-3 py-1.5 rounded-lg text-sm font-medium {{ 'bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400' if status_filter == 'pending' else 'text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700/50' }}">Pending</a>
    <a href="/admin/schools?status=active" class="px-3 py-1.5 rounded-lg text-sm font-medium {{ 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400' if status_filter == 'active' else 'text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700/50' }}">Active</a>
    <a href="/admin/schools?status=suspended" class="px-3 py-1.5 rounded-lg text-sm font-medium {{ 'bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400' if status_filter == 'suspended' else 'text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700/50' }}">Suspended</a>
</div>

<p class="text-sm text-slate-500 dark:text-slate-400 mb-4">{{ total }} school{{ 's' if total != 1 else '' }}</p>

<div class="bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden">
    <table class="min-w-full divide-y divide-slate-200 dark:divide-slate-700">
        <thead class="bg-slate-50 dark:bg-slate-700/50">
            <tr>
                <th class="px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase">School</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase">Type</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase">Location</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase">Status</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase">Created</th>
                <th class="px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase">Actions</th>
            </tr>
        </thead>
        <tbody class="divide-y divide-slate-200 dark:divide-slate-700">
            {% for school in schools %}
            <tr class="hover:bg-slate-50 dark:hover:bg-slate-700/30">
                <td class="px-4 py-3">
                    <div class="flex items-center gap-3">
                        <div class="h-8 w-8 rounded-lg bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-primary-600 dark:text-primary-400 text-xs font-bold flex-shrink-0">
                            {{ school.name[0] | upper }}
                        </div>
                        <span class="text-sm font-medium text-slate-900 dark:text-white">{{ school.name }}</span>
                    </div>
                </td>
                <td class="px-4 py-3 text-sm text-slate-600 dark:text-slate-300">{{ school.school_type | replace('_', ' ') | title }}</td>
                <td class="px-4 py-3 text-sm text-slate-600 dark:text-slate-300">{{ school.city if school.city else '-' }}{% if school.state %}, {{ school.state }}{% endif %}</td>
                <td class="px-4 py-3">
                    {% set status_colors = {'pending': 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400', 'active': 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400', 'suspended': 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400'} %}
                    <span class="inline-flex px-2 py-0.5 rounded-full text-xs font-medium {{ status_colors.get(school.status.value, 'bg-slate-100 text-slate-700') }}">
                        {{ school.status.value | replace('_', ' ') | title }}
                    </span>
                </td>
                <td class="px-4 py-3 text-sm text-slate-500 dark:text-slate-400">{{ school.created_at.strftime('%d %b %Y') }}</td>
                <td class="px-4 py-3 text-right">
                    <a href="/admin/schools/{{ school.id }}" class="text-sm text-primary-600 dark:text-primary-400 hover:underline">View</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% if total_pages > 1 %}
<div class="flex justify-center mt-6 gap-2">
    {% if page > 1 %}
    <a href="/admin/schools?status={{ status_filter }}&page={{ page - 1 }}" class="px-4 py-2 text-sm rounded-lg border border-slate-300 dark:border-slate-600 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700">Previous</a>
    {% endif %}
    <span class="px-4 py-2 text-sm text-slate-600 dark:text-slate-300">Page {{ page }} of {{ total_pages }}</span>
    {% if page < total_pages %}
    <a href="/admin/schools?status={{ status_filter }}&page={{ page + 1 }}" class="px-4 py-2 text-sm rounded-lg border border-slate-300 dark:border-slate-600 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700">Next</a>
    {% endif %}
</div>
{% endif %}
{% endblock %}
